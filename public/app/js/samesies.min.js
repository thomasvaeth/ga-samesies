!function(e,t,n){"use strict";function o(e){return{require:"?ngModel",restrict:"A",link:function(n,o,r,a){function l(){var e=c(n);return t.isObject(e)&&e.hasOwnProperty("$viewValue")&&(e=e.$viewValue),e}if(!a)return void(console&&console.warn&&console.warn("Match validation requires ngModel to be on the element"));var c=e(r.match),i=e(r.matchCaseless);n.$watch(l,function(){a.$$parseAndValidate()}),a.$validators.match=function(){var e=l();return i(n)&&t.isString(e)&&t.isString(a.$viewValue)?a.$viewValue.toLowerCase()===e.toLowerCase():a.$viewValue===e}}}}t.module("validation.match",[]),t.module("validation.match").directive("match",o),o.$inject=["$parse"]}(window,window.angular),function(){var e=angular.module("smoothScroll",[]),t=function(e,t){t=t||{};var n=t.duration||800,o=t.offset||0,r=t.easing||"easeInOutQuart",a=t.callbackBefore||function(){},l=t.callbackAfter||function(){},c=document.getElementById(t.containerId)||null,i=void 0!=c&&null!=c,u=function(){return i?c.scrollTop:window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop},s=function(e,t){switch(e){case"easeInQuad":return t*t;case"easeOutQuad":return t*(2-t);case"easeInOutQuad":return.5>t?2*t*t:-1+(4-2*t)*t;case"easeInCubic":return t*t*t;case"easeOutCubic":return--t*t*t+1;case"easeInOutCubic":return.5>t?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1;case"easeInQuart":return t*t*t*t;case"easeOutQuart":return 1- --t*t*t*t;case"easeInOutQuart":return.5>t?8*t*t*t*t:1-8*--t*t*t*t;case"easeInQuint":return t*t*t*t*t;case"easeOutQuint":return 1+--t*t*t*t*t;case"easeInOutQuint":return.5>t?16*t*t*t*t*t:1+16*--t*t*t*t*t;default:return t}},f=function(e){var t=0;if(e.offsetParent)do t+=e.offsetTop,e=e.offsetParent;while(e);return t=Math.max(t-o,0)};setTimeout(function(){var t,o,p,d,m=null,h=u(),g=f(e),v=0,w=g-h,k=function(){m=u(),d=window.innerHeight+m,p=i?c.scrollHeight:document.body.scrollheight,(o==g||m==g||d>=p)&&(clearInterval(b),l(e))},A=function(){v+=16,t=v/n,t=t>1?1:t,o=h+w*s(r,t),i?c.scrollTop=o:window.scrollTo(0,o),k()};a(e);var b=setInterval(A,16)},0)};e.factory("smoothScroll",function(){return t}),e.directive("smoothScroll",["smoothScroll",function(e){return{restrict:"A",scope:{callbackBefore:"&",callbackAfter:"&"},link:function(t,n,o){("undefined"==typeof o.scrollIf||"true"===o.scrollIf)&&setTimeout(function(){var r=function(e){if(o.callbackBefore){var n=t.callbackBefore({element:e});"function"==typeof n&&n(e)}},a=function(e){if(o.callbackAfter){var n=t.callbackAfter({element:e});"function"==typeof n&&n(e)}};e(n[0],{duration:o.duration,offset:o.offset,easing:o.easing,callbackBefore:r,callbackAfter:a,containerId:o.containerId})},0)}}}]),e.directive("scrollTo",["smoothScroll",function(e){return{restrict:"A",scope:{callbackBefore:"&",callbackAfter:"&"},link:function(t,n,o){var r;n.on("click",function(n){if(n.preventDefault(),r=document.getElementById(o.scrollTo)){var a=function(e){if(o.callbackBefore){var n=t.callbackBefore({element:e});"function"==typeof n&&n(e)}},l=function(e){if(o.callbackAfter){var n=t.callbackAfter({element:e});"function"==typeof n&&n(e)}};return e(r,{duration:o.duration,offset:o.offset,easing:o.easing,callbackBefore:a,callbackAfter:l,containerId:o.containerId}),!1}})}}}])}(),angular.module("CustomerServices",["ngResource"]).factory("Template",["$resource",function(e){return e("/api/templates/:id")}]).factory("Auth",["$window",function(e){return{saveToken:function(t){e.localStorage["samesies-token"]=t},getToken:function(){return e.localStorage["samesies-token"]},removeToken:function(){e.localStorage.removeItem("samesies-token")},isSignedIn:function(){var e=this.getToken();return e?!0:!1}}}]).factory("AuthInterceptor",["Auth",function(e){return{request:function(t){var n=e.getToken();return n&&(t.headers.Authorization="Bearer "+n),t}}}]).factory("Alerts",[function(){var e=[];return{clear:function(){e=[]},add:function(t,n){e.push({type:t,msg:n})},get:function(){return e},remove:function(t){e.splice(t,1)}}}]),angular.module("SamesiesControllers",["CustomerServices"]).controller("TemplateController",["$scope","Template",function(e,t){function n(e){for(var t,n,o=e.length;o;)n=Math.floor(Math.random()*o--),t=e[o],e[o]=e[n],e[n]=t;return e}e.templates=[],t.query(function(t){var o=n(t);e.templates=o},function(e){console.log(e)})}]).controller("NavController",["$scope","$location","Auth",function(e,t,n){e.signout=function(){n.removeToken(),t.path("/")}}]).controller("SignupController",["$scope","$http","$location","Auth","Alerts",function(e,t,n,o,r){e.customer={firstName:"",lastName:"",email:"",password:""},e.signup=function(){t.post("/api/customers",e.customer).then(function(a){t.post("/api/auth",e.customer).then(function(e){e.data.token?(o.saveToken(e.data.token),n.path("/")):(r.add("danger","A user previously signed up with that email address."),n.path("/signup"))},function(e){r.add("danger",e.data.message),console.log(e)})},function(e){r.add("danger",e.data.message),console.log(e)})}}]).controller("SigninController",["$scope","$http","$location","Auth","Alerts",function(e,t,n,o,r){e.customer={email:"",password:""},e.signin=function(){t.post("/api/auth",e.customer).then(function(e){e.data.token?(o.saveToken(e.data.token),n.path("/")):(r.add("danger","Incorrect email or password."),n.path("/signin"))},function a(e){r.add("danger",a.data.message),console.log(e.data)})}}]).controller("BackController",["$scope",function(e){e.previous=function(){window.history.back()}}]).controller("AlertController",["$scope","Alerts",function(e,t){e.alerts=t.get(),e.closeAlert=function(e){t.remove(e)}}]);var app=angular.module("SamesiesApplication",["ui.bootstrap","ngRoute","ngAnimate","CustomerServices","SamesiesControllers","validation.match","smoothScroll"]);app.config(["$routeProvider","$locationProvider",function(e,t){e.when("/",{templateUrl:"app/views/samesies.html",controller:"TemplateController"}).when("/templates",{templateUrl:"app/views/templates.html",controller:"TemplateController"}).when("/about",{templateUrl:"app/views/about.html"}).when("/signup",{templateUrl:"app/views/signup.html",controller:"SignupController"}).when("/signin",{templateUrl:"app/views/signin.html",controller:"SigninController"}).otherwise({templateUrl:"app/views/404.html"}),t.html5Mode(!0)}]).config(["$httpProvider",function(e){e.interceptors.push("AuthInterceptor")}]).run(["$rootScope","Auth",function(e,t){e.isSignedIn=function(){return t.isSignedIn.apply(t)}}]);